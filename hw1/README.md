## Запуск диаграммки
```docker run --rm -it -v $(pwd):/data -p 5173:5173 likec4/likec4 serve --listen 0.0.0.0```

## Запуск сервиса
сборка
```docker build -t soa_hw1 .```

запуск
```docker run -p 8000:8000 soa_hw1```

проверка
```curl -v http://localhost:8000/health```

## Домены маркетплейса
- entry point для пользования маркетплейсом
    - web app: апликуха в браузере например на реакте, чтобы продавцы и покупатели могли пользоваться маркетплейсом
    - api gateway: отвечает за маршрутизацию запросов, рейт лимиты, мб можно добавить контроль роботного траффика, если нас парсят
- персонализированная лента:
    - feed service - мл обертка над каталогом, которая ранжирует товары для пользователей
    - feed cache - redis, чтобы переиспользовать посчитанные персонализированные данные
- личный кабинет:
    - user info service для морды профиля (в зависимости от типа пользователя будет либо просто базовая страница с данными либо для продавца информация про его товары, статистику и т д)
    - user db - бд для хранения данных о покупателе или продавце
- корзина:
    - basket сервис, для просмотра и редактирования корзины, с возможностью из нее заказать товары
- заказы:
    - order service для создания заказов, изменения статусов заказов, проверки наличия товаров перед оформлением
    - order db для хранения статуса товаров
- оплата и пополнение баланса встроенного кошелька:
    - payment service - обертка над внешней платежной системой и базой для хранения инфы о транзакциях
    - payment db - сама база для хранения транзакций и балансов пользователей
- нотификации:
    - notification service - просто слушает очередь и когда надо пингует внешший сервис для нотификаций, базы нет потому что это тонкая прослойка
- внешние сервисы:
    - ну тут все понятно
- каталог:
    - catalog service - внутренний сервис для базовых операций над каталогом
    - catalog db - данные о всех товарах

Делал на чувствах и вайбах, считаю логичным, ведь тут достаточно хорошая гранулярность, нет каких-то явных сервисов монолитов, общих бд, все домены отвечают за свою хорошо ограниченную зону; да, можно много чего еще расщепить, как например сервис доставок вынести из сервиса ордеров, добавить фичу личных страниц для магазинов да и много чего еще...

## Взаимодействия
Почти все синхронные (на с4 графике видно по разным типам стрелок), есть асинхронная часть с использование брокера сообщений при оплате и нотификациях

## Альтернативный вариант
самое просто всегда можно сделать просто один монолит c модулями внутри, чтобы была простая цепочка (пользователь -> web app -> gateway -> report (монолит) -> db)

плюсы этого подхода лучше раскрываются при старте разработки маркетплейса, так как фичей мало пока, все в одном месте, не нужно думать про сетевые взаимодействия

минусы подхода - сложность масштабирования, труднее разбираться в коде спустя время из-за огромной связности, невозможности скейлить отдельные домены, один баг может быть критичен для всего пользовательского опыта, много конфликтов между командами, а также не может быть асинхронной части поэтому будем зависать когда это не нужно

плюсы моего подхода это инвертированные минусы алтернативного подхода + мы молодые и современные

минусы - да я бы не сказал что они сильно есть, только что инфру для всего этого мб сложнее поднять, и придется думать про сетевые взаимодействия